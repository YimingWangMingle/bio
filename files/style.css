:root {
    /* Light Mode Colors */
    --bg-body: #F5F5F7;
    --bg-card: rgba(255, 255, 255, 0.2);
    --bg-card-hover: rgba(255, 255, 255, 0.65);
    --text-primary: #1D1D1F;
    --text-secondary: #86868B;
    --text-link: #0066CC;
    --accent-color: #0071E3;
    --border-color: rgba(0, 0, 0, 0.08);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.04);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.08);
    --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.12);
    --blur-amt: 20px;
    --nav-bg: rgba(255, 255, 255, 0.85);
    
    /* Button Colors */
    --btn-bg: #EBEBEF;
    --btn-text: #1D1D1F;
    --btn-hover: #DEDEDF;
}

/* Dark Mode Colors */
body.dark-mode {
    --bg-body: #000000;
    --bg-card: rgba(28, 28, 30, 0.4);
    --bg-card-hover: rgba(44, 44, 46, 0.65);
    --text-primary: #F5F5F7;
    --text-secondary: #98989D;
    --text-link: #2997FF;
    --accent-color: #0A84FF;
    --border-color: rgba(255, 255, 255, 0.12);
    --shadow-sm: 0 2px 8px rgba(0, 0, 0, 0.3);
    --shadow-md: 0 8px 24px rgba(0, 0, 0, 0.5);
    --shadow-lg: 0 20px 40px rgba(0, 0, 0, 0.7);
    --nav-bg: rgba(28, 28, 30, 0.85);

    --btn-bg: #1C1C1E;
    --btn-text: #F5F5F7;
    --btn-hover: #2C2C2E;
}

* { box-sizing: border-box; }

body {
    background-color: var(--bg-body);
    color: var(--text-primary);
    font-family: -apple-system, BlinkMacSystemFont, "SF Pro Text", "Segoe UI", Roboto, Helvetica, Arial, sans-serif;
    line-height: 1.6;
    -webkit-font-smoothing: antialiased;
    margin: 0;
    padding-bottom: 80px;
    transition: background-color 0.4s ease, color 0.4s ease;
    overflow-x: hidden;
}

a { text-decoration: none; color: var(--text-link); transition: opacity 0.2s; cursor: pointer; }
a:hover { opacity: 0.8; text-decoration: none; color: var(--text-link); }

/* Ambient Light */
.ambient-light {
    position: fixed; top: -20%; left: -10%; width: 120vw; height: 80vh;
    background: radial-gradient(circle at 50% 50%, rgba(0, 113, 227, 0.08), transparent 60%);
    z-index: -1; pointer-events: none; transition: opacity 0.4s;
}
body.dark-mode .ambient-light { opacity: 0.3; }

.container { max-width: 850px; padding: 0 20px; margin: 0 auto; }

/* =========================================
   1. Nav
   ========================================= */
.floating-nav {
    position: fixed; top: 20px; left: 50%; transform: translateX(-50%);
    background: var(--nav-bg);
    backdrop-filter: blur(var(--blur-amt)); -webkit-backdrop-filter: blur(var(--blur-amt));
    padding: 6px 8px; border-radius: 100px;
    border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm); z-index: 1000;
    display: flex; align-items: center;
    transition: all 0.3s ease;
}

.nav-links { display: flex; gap: 5px; align-items: center; }

.nav-item {
    color: var(--text-primary); font-size: 13px; font-weight: 500;
    padding: 8px 16px; border-radius: 20px; transition: all 0.2s ease;
    white-space: nowrap; border: 1px solid transparent;
}
.nav-item:hover { background-color: var(--btn-hover); }

.nav-item.contact-btn { cursor: pointer; }
.nav-item.contact-btn.copied {
    background-color: #34C759; color: white; border-color: #34C759;
}

.theme-toggle-btn {
    background: transparent; border: none; color: var(--text-primary);
    padding: 8px 12px; margin-left: 5px; border-radius: 50%; cursor: pointer;
    display: flex; align-items: center; justify-content: center;
    transition: transform 0.2s, background 0.2s;
}
.theme-toggle-btn:hover { background-color: var(--btn-hover); }

.main-wrapper { margin-top: 140px; }

/* =========================================
   2. Profile (Updated Avatar Shape)
   ========================================= */
.section-profile { margin-bottom: 60px; }
.display-flex-center { display: flex; align-items: center; }

.status-badge {
    display: inline-flex; align-items: center; font-size: 12px; font-weight: 600;
    text-transform: uppercase; letter-spacing: 0.05em; color: var(--text-secondary);
    margin-bottom: 16px;
}
.pulse-dot {
    width: 8px; height: 8px; background-color: #30D158; border-radius: 50%; margin-right: 8px;
    box-shadow: 0 0 0 2px rgba(48, 209, 88, 0.2); animation: pulse 2s infinite;
}
@keyframes pulse {
    0% { box-shadow: 0 0 0 0 rgba(48, 209, 88, 0.4); }
    70% { box-shadow: 0 0 0 6px rgba(48, 209, 88, 0); }
    100% { box-shadow: 0 0 0 0 rgba(48, 209, 88, 0); }
}

.hero-name {
    font-size: 42px; font-weight: 700; letter-spacing: -0.02em;
    margin: 0 0 12px 0; line-height: 1.1; color: var(--text-primary);
}
.cn-name {
    font-family: "KaiTi", "STKaiti", serif; font-weight: 400; font-size: 36px;
    color: var(--text-secondary); margin-left: 12px; vertical-align: baseline;
}

.hero-bio {
    font-size: 17px; line-height: 1.6; color: var(--text-secondary);
    margin-bottom: 16px; max-width: 95%;
}
.hero-bio strong { color: var(--text-primary); font-weight: 600; }

.text-link {
    color: var(--text-primary); text-decoration: underline;
    text-decoration-color: rgba(128,128,128,0.3); text-underline-offset: 4px;
}
.text-link:hover { text-decoration-color: var(--accent-color); color: var(--accent-color); }

.avatar-container { position: relative; display: inline-block; padding: 10px; }

/* 核心修改：头像变为圆角矩形 (Squircle) */
.avatar-img {
    width: 260px; height: auto; object-fit: cover;
    border-radius: 32px; /* 圆角大小 */
    box-shadow: var(--shadow-lg); transition: transform 0.3s ease;
    border: 1px solid var(--border-color);
}
.avatar-img:hover { transform: scale(1.02) rotate(-1deg); }

/* =========================================
   3. News
   ========================================= */
.section-news { margin-bottom: 50px; }

.glass-panel {
    background: var(--bg-card); backdrop-filter: blur(var(--blur-amt)); -webkit-backdrop-filter: blur(var(--blur-amt));
    border-radius: 20px; padding: 24px; border: 1px solid var(--border-color);
    box-shadow: var(--shadow-sm);
}

.panel-title {
    font-size: 16px; font-weight: 600; margin: 0 0 20px 0;
    display: flex; align-items: center; gap: 8px; color: var(--text-primary);
}

.news-scroll-area {
    max-height: 180px; overflow-y: auto; padding-right: 5px;
    mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
    -webkit-mask-image: linear-gradient(to bottom, black 85%, transparent 100%);
}
.news-scroll-area::-webkit-scrollbar { width: 0px; }

.news-timeline { list-style: none; padding: 0; margin: 0; }
.news-timeline li {
    display: flex; margin-bottom: 14px; font-size: 14px;
    align-items: flex-start; color: var(--text-primary);
}

.news-date {
    font-family: "SF Mono", "Menlo", monospace; font-size: 11px; font-weight: 700;
    color: var(--text-secondary); background: var(--btn-bg);
    padding: 3px 6px; border-radius: 5px; margin-right: 12px;
    flex-shrink: 0; position: relative; top: 3px;
}
.news-content strong { font-weight: 600; color: var(--text-primary); }

/* =========================================
   4. Publications (Compact List Layout)
   ========================================= */
.section-header {
    font-size: 24px; font-weight: 700; margin-bottom: 30px;
    letter-spacing: -0.01em; color: var(--text-primary);
}

.pub-card {
    display: flex;
    gap: 18px;
    margin-bottom: 16px;
    align-items: center; /* 垂直居中，保证左图右文对齐 */
    padding: 12px;
    border-radius: 16px;
    background-color: var(--bg-card);
    border: 1px solid var(--border-color);
    transition: background-color 0.2s ease;
}
.pub-card:hover { background-color: var(--bg-card-hover); box-shadow: var(--shadow-sm); }

/* 图片固定大小，长方形 */
.pub-img-wrapper {
    flex: 0 0 150px; /* 宽度固定 */
    height: 100px;   /* 高度固定 */
    border-radius: 10px;
    overflow: hidden;
    cursor: zoom-in;
    position: relative;
    background-color: #eee;
    border: 1px solid rgba(0,0,0,0.05);
}
.pub-img-wrapper img { width: 100%; height: 100%; object-fit: cover; }

.img-overlay {
    position: absolute; top: 0; left: 0; right: 0; bottom: 0;
    background: rgba(0,0,0,0.2); display: flex; align-items: center; justify-content: center;
    opacity: 0; transition: opacity 0.2s;
}
.img-overlay i { color: white; font-size: 20px; }
.pub-img-wrapper:hover .img-overlay { opacity: 1; }

.pub-content {
    flex: 1;
    min-width: 0; /* 必须：允许Flex子项缩小以触发滚动 */
    display: flex;
    flex-direction: column;
    justify-content: center; /* 文字区域垂直居中 */
    gap: 4px; /* 行间距 */
}

/* 左右滑动核心样式 */
.text-scroll-wrapper {
    white-space: nowrap;      /* 强制不换行 */
    overflow-x: auto;         /* 超出滚动 */
    overflow-y: hidden;
    scrollbar-width: none;    /* Firefox 隐藏滚动条 */
    -webkit-overflow-scrolling: touch;
    padding-bottom: 1px;
    mask-image: linear-gradient(to right, black 90%, transparent 100%);
    -webkit-mask-image: linear-gradient(to right, black 90%, transparent 100%);
}
.text-scroll-wrapper::-webkit-scrollbar { display: none; } /* Chrome 隐藏滚动条 */

.pub-title {
    font-size: 15px; font-weight: 600; color: var(--text-primary);
    margin: 0; line-height: 1.4;
}

.pub-authors {
    font-size: 13px; color: var(--text-secondary); margin: 0;
}
.pub-authors strong { color: var(--text-primary); font-weight: 500; }

.pub-venue {
    font-size: 12px; color: var(--text-secondary); font-style: italic;
    margin: 0; display: flex; align-items: center;
}

.tag {
    font-style: normal; font-size: 9px; font-weight: 700; padding: 2px 6px;
    border-radius: 4px; margin-left: 6px; text-transform: uppercase;
}
.tag-red { background: rgba(255, 59, 48, 0.1); color: #FF3B30; }
.tag-orange { background: rgba(255, 149, 0, 0.1); color: #FF9500; }

/* 按钮区域 */
.pub-actions {
    margin-top: 6px;
    display: flex; gap: 8px;
    overflow-x: auto; scrollbar-width: none;
}
.pub-actions::-webkit-scrollbar { display: none; }

.btn-pill {
    display: inline-flex; align-items: center; gap: 5px;
    padding: 4px 10px; font-size: 11px; font-weight: 600;
    color: var(--btn-text); background-color: var(--btn-bg);
    border-radius: 12px; transition: all 0.2s ease; flex-shrink: 0;
}
.btn-pill:hover { background-color: var(--btn-hover); transform: translateY(-1px); }
.btn-pill.paper:hover { background-color: #007AFF; color: white; }
.btn-pill.code:hover { background-color: #1D1D1F; color: white; }
body.dark-mode .btn-pill.code:hover { background-color: #fff; color: #000; }
.btn-pill.bibtex:hover { background-color: #8E8E93; color: white; }
.btn-pill.disabled { opacity: 0.5; cursor: not-allowed; background: transparent; border: 1px solid var(--border-color); }
.btn-pill.disabled:hover { transform: none; background: transparent; color: var(--text-secondary); }

/* =========================================
   Footer & Modal
   ========================================= */
.site-footer {
    border-top: 1px solid var(--border-color); padding-top: 30px;
    margin-top: 60px; text-align: center; color: var(--text-secondary); font-size: 12px;
}
.site-footer img { opacity: 0.6; transition: opacity 0.3s; width: 100px; }
.site-footer img:hover { opacity: 1; }

.modal-content.glass-modal { background: transparent; border: none; box-shadow: none; }
.modal-body img { border-radius: 12px; box-shadow: var(--shadow-lg); max-width: 100%; max-height: 80vh; }
.close-btn { position: absolute; top: -40px; right: 0; background: none; border: none; color: white; font-size: 28px; cursor: pointer; }

/* Animations */
.fade-in { opacity: 0; transform: translateY(20px); animation: fadeInUp 0.8s cubic-bezier(0.16, 1, 0.3, 1) forwards; }
.delay-1 { animation-delay: 0.1s; }
.delay-2 { animation-delay: 0.2s; }
.delay-3 { animation-delay: 0.3s; }
.delay-4 { animation-delay: 0.4s; }
@keyframes fadeInUp { to { opacity: 1; transform: translateY(0); } }

/* Mobile Tweaks */
@media (max-width: 768px) {
    .display-flex-center { flex-direction: column-reverse; text-align: center; }
    .hero-name { font-size: 32px; margin-top: 20px; }
    .cn-name { display: block; margin-left: 0; font-size: 28px; margin-top: 5px; }
    .pub-card { gap: 12px; }
    .pub-img-wrapper { flex: 0 0 110px; height: 80px; }
}